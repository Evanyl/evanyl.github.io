<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>Estimate Pi</title>
	<style>
		body, html {
			margin: 0px;
			padding: 0px;
		}

		body {
			font-size: 16px;
			text-align: center;
			font-family: monospace;
		}

		h1 {
			font-size: 3rem;
		}

		svg {
			margin: 0;
			padding: 0;
			width: 300px;
			height: 300px;
			border: 1px solid black;
		}

		h2 {
			font-size: 2rem;
		}

		#explanation {
			width: 30vw;
			padding: 0;
			margin: auto;
		}

		#explanation p {
			text-align: left;
			text-indent: 5%;
		}

	</style>
</head>
<body>
	<h1>Estimation of Pi</h1>
	<form id="numPoints" onsubmit='testPi();return false'>
		<input
			id="numPointsValue"
			type="number"
			placeholder="Type a number of points to test..."
			required
			autocomplete="off" 
		/>
		<button class="button">Test</button>
	</form>

	<p>Estimation of Pi: <span id="piNum"></span></p>
	<div id="axis">
		<svg></svg>
	</div>
	<div id="explanation">
		<h2>How it works</h2>
		<p>
			Points are randomly generated by a function from 0 to 1. We can then use the function twice, 
			to generate the (x,y) coordinates on a graph. These points fit into a unit square. We can 
			also imagine this unit square as containing a quarter-circle with radius one(This will be 
			visually evident as your points are displayed on the graph). 
		</p>
		<p>
			As we generate more points, we can estimate the relation of the ratio of points inside 
			the circle(C) and total points(T) generated, to the area of a quarter unit circle and 
			a square with side lengths(L) 1. This leads to the series of equations.
		</p>
		<br>
		<p>
			$${C \over T} = {{1/4 \pi r ^ 2} \over {L ^ 2}}$$
		</p>
		<p>
			$${C \over T} = {{1/4 \pi (1) ^ 2} \over {(1) ^ 2}}$$
		</p>
		<p>
			$${C \over T} = {{\pi (1) ^ 2} \over {4}}$$
		</p>
		<p>
			$$\pi = {{4C} \over T}$$
		</p>
		<p>
			Thus, pi can be estimated by the number of points in the circle divided by the number of 
			points total.
		</p>
	</div>
	<!--{-b \pm \sqrt{b^2-4ac} \over 2a}$$-->


	<script src="https://d3js.org/d3.v5.min.js"></script>
	<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
	<script>
		let numPointsElement = document.getElementById('numPointsValue');
		let piDisplay = document.getElementById('piNum');

		let testPi = () => {
			let pointsToTest = numPointsElement.value;
			let pointsCircle = 0;
			let pointsTotal = 0;

			let dataset = [];

			let x;
			let y;
			let color;

			d3.select("svg").remove();
			let svg = d3.select('#axis')
					.append('svg')
					.attr('width', 300)
					.attr('height', 300);

			for (let i = 1; i <= pointsToTest; i++) {
				x = Math.random();
				y = Math.random();

				color = 'black';
				

				distance = Math.pow(x, 2) + Math.pow(y, 2);
				if (distance <= 1) {
					pointsCircle++;
					color = 'red';
				}
				pointsTotal++;

				dataset.push([x, y, color]);
			}

			let pi = 4 * pointsCircle / pointsTotal;

			piDisplay.innerHTML = pi;

			svg.selectAll('circle')
			   .data(dataset)
			   .enter()
			   .append('circle')
			   .attr('cx', (d) =>  300 * d[0])
			   .attr('cy', (d) => 300 - 300 * d[1])
			   .attr('r', 1.5)
			   .attr('fill', (d) => d[2]);
		}
	</script>
</body>

</html>